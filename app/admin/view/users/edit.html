{include file="../app/common/view/public/header.html" /}

<body>
    <div class="layui-form layuimini-form">
        <!-- <input type="hidden" name="id" value="" class="id"> -->
        <div class="layui-form-item">
            <label class="layui-form-label">用户 ID</label>
            <div class="layui-input-block">
                <input type="text" name="id" value="" autocomplete="off" disabled="disabled" class="layui-input id">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label required">用户名</label>
            <div class="layui-input-block">
                <input type="text" name="username" lay-verify="required" lay-reqtext="用户名不能为空" placeholder="请输入用户名"
                    value="" autocomplete="off" class="layui-input username">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">邮箱</label>
            <div class="layui-input-block">
                <input type="text" name="email" placeholder="请输入邮箱" value="" autocomplete="off"
                    class="layui-input email">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">手机</label>
            <div class="layui-input-block">
                <input type="text" name="mobile" placeholder="请输入手机" value="" autocomplete="off"
                    class="layui-input mobile">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label required">昵称</label>
            <div class="layui-input-block">
                <input type="text" name="nickname" lay-verify="required" lay-reqtext="昵称不能为空" placeholder="请输入昵称"
                    value="" autocomplete="off" class="layui-input nickname">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label required">余额</label>
            <div class="layui-input-block">
                <input type="text" name="money" lay-verify="required" lay-reqtext="余额不能为空" placeholder="请输入余额" value=""
                    autocomplete="off" class="layui-input money">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">状态</label>
            <div class="layui-input-block">
                <input type="radio" name="status" value="正常" title="正常" class="status-1">
                <input type="radio" name="status" value="封禁" title="封禁" class="status-0">
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">确认修改</button>
            </div>
        </div>
    </div>
    <script src="/static/lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
    <script>
        layui.use(['form', 'layer'], function () {
            var form = layui.form,
                layer = layui.layer,
                $ = layui.$;

            //监听提交
            form.on('submit(saveBtn)', function (data) {
                $.post('../api/app_update', data.field, function (res) {
                    console.log(res)
                    if (res == '0') {
                        layer.msg('修改失败')
                        setTimeout(function () {
                            var iframeIndex = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(iframeIndex);
                        }, 1000)
                    }
                    if (res == '1') {
                        layer.msg('修改成功')
                        setTimeout(function () {
                            var iframeIndex = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(iframeIndex);
                        }, 1000)
                    }
                    if (res == '2') {
                        layer.msg('软件已存在')
                        setTimeout(function () {
                            var iframeIndex = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(iframeIndex);
                        }, 1000)
                    }
                })
                return false;
            });
        });
    </script>
    {include file="../app/common/view/public/footer.html" /}